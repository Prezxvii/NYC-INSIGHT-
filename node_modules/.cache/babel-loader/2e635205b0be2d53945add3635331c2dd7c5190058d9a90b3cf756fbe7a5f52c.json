{"ast":null,"code":"// src/services/contentService.js\n\nconst API_KEYS = {\n  news: '46c7224f350846e0b5932cb038f8e6e0',\n  youtube: 'AIzaSyA9dX5bHvyUk8OGp2gKZGl9HuWIXwN6xno',\n  rapidapi: '588ebdf86amsh6896d4018de52d4p1aa9c8jsn9596c34491d3'\n};\n\n// News API Integration (NewsAPI.org)\nexport const fetchNewsArticles = async (query = 'New York', pageSize = 10) => {\n  try {\n    var _data$articles;\n    const response = await fetch(`https://newsapi.org/v2/everything?q=${query}&language=en&pageSize=${pageSize}&sortBy=publishedAt&apiKey=${API_KEYS.news}`);\n    const data = await response.json();\n    if (data.status === 'error') {\n      console.error('News API Error:', data.message);\n      return [];\n    }\n    return ((_data$articles = data.articles) === null || _data$articles === void 0 ? void 0 : _data$articles.map(article => ({\n      id: article.url,\n      title: article.title,\n      summary: article.description || 'No description available',\n      source: article.source.name,\n      mediaUrl: article.urlToImage || 'https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=600',\n      link: article.url,\n      type: 'article',\n      publishedAt: article.publishedAt\n    }))) || [];\n  } catch (error) {\n    console.error('Error fetching news:', error);\n    return [];\n  }\n};\n\n// YouTube API Integration\nexport const fetchYouTubeVideos = async (query = 'New York City', maxResults = 10) => {\n  try {\n    var _data$items;\n    const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${query}&type=video&maxResults=${maxResults}&order=date&key=${API_KEYS.youtube}`);\n    const data = await response.json();\n    if (data.error) {\n      console.error('YouTube API Error:', data.error.message);\n      return [];\n    }\n    return ((_data$items = data.items) === null || _data$items === void 0 ? void 0 : _data$items.map(video => {\n      var _video$snippet$thumbn, _video$snippet$thumbn2;\n      return {\n        id: video.id.videoId,\n        title: video.snippet.title,\n        summary: video.snippet.description.substring(0, 150) + '...',\n        source: 'YouTube',\n        mediaUrl: ((_video$snippet$thumbn = video.snippet.thumbnails.high) === null || _video$snippet$thumbn === void 0 ? void 0 : _video$snippet$thumbn.url) || ((_video$snippet$thumbn2 = video.snippet.thumbnails.medium) === null || _video$snippet$thumbn2 === void 0 ? void 0 : _video$snippet$thumbn2.url),\n        link: `https://www.youtube.com/watch?v=${video.id.videoId}`,\n        type: 'video',\n        publishedAt: video.snippet.publishedAt\n      };\n    })) || [];\n  } catch (error) {\n    console.error('Error fetching YouTube videos:', error);\n    return [];\n  }\n};\n\n// TikTok Integration using RapidAPI\nexport const fetchTikTokContent = async (hashtag = 'newyork') => {\n  try {\n    var _data$data;\n    const response = await fetch(`https://tiktok-scraper7.p.rapidapi.com/hashtag/posts?hashtag=${hashtag}&count=10`, {\n      method: 'GET',\n      headers: {\n        'X-RapidAPI-Key': API_KEYS.rapidapi,\n        'X-RapidAPI-Host': 'tiktok-scraper7.p.rapidapi.com'\n      }\n    });\n    const data = await response.json();\n    if (!((_data$data = data.data) !== null && _data$data !== void 0 && _data$data.videos)) {\n      console.log('No TikTok videos found');\n      return [];\n    }\n    return data.data.videos.slice(0, 10).map(video => {\n      var _video$author;\n      return {\n        id: video.video_id || video.id,\n        title: video.title || video.desc || 'TikTok Video',\n        summary: (video.desc || 'Watch this TikTok video').substring(0, 150),\n        source: 'TikTok',\n        mediaUrl: video.cover || video.origin_cover,\n        link: video.play || `https://www.tiktok.com/@${(_video$author = video.author) === null || _video$author === void 0 ? void 0 : _video$author.unique_id}/video/${video.video_id}`,\n        type: 'video',\n        publishedAt: video.create_time ? new Date(video.create_time * 1000).toISOString() : new Date().toISOString()\n      };\n    });\n  } catch (error) {\n    console.error('Error fetching TikTok content:', error);\n    return [];\n  }\n};\n\n// Combined Content Fetch - Mix all sources\nexport const fetchAllContent = async (filters = {}) => {\n  const {\n    query = 'New York',\n    includeVideos = true,\n    includeArticles = true\n  } = filters;\n  const promises = [];\n  if (includeArticles) {\n    promises.push(fetchNewsArticles(query));\n  }\n  if (includeVideos) {\n    promises.push(fetchYouTubeVideos(query));\n    promises.push(fetchTikTokContent(query.toLowerCase().replace(/\\s+/g, '')));\n  }\n  try {\n    const results = await Promise.all(promises);\n    const allContent = results.flat().filter(item => item !== null);\n\n    // Sort by published date (newest first)\n    return allContent.sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt));\n  } catch (error) {\n    console.error('Error fetching all content:', error);\n    return [];\n  }\n};","map":{"version":3,"names":["API_KEYS","news","youtube","rapidapi","fetchNewsArticles","query","pageSize","_data$articles","response","fetch","data","json","status","console","error","message","articles","map","article","id","url","title","summary","description","source","name","mediaUrl","urlToImage","link","type","publishedAt","fetchYouTubeVideos","maxResults","_data$items","items","video","_video$snippet$thumbn","_video$snippet$thumbn2","videoId","snippet","substring","thumbnails","high","medium","fetchTikTokContent","hashtag","_data$data","method","headers","videos","log","slice","_video$author","video_id","desc","cover","origin_cover","play","author","unique_id","create_time","Date","toISOString","fetchAllContent","filters","includeVideos","includeArticles","promises","push","toLowerCase","replace","results","Promise","all","allContent","flat","filter","item","sort","a","b"],"sources":["/Users/tbready/nyc-insight-project/src/services/contentService.js"],"sourcesContent":["// src/services/contentService.js\n\nconst API_KEYS = {\n  news: '46c7224f350846e0b5932cb038f8e6e0',\n  youtube: 'AIzaSyA9dX5bHvyUk8OGp2gKZGl9HuWIXwN6xno',\n  rapidapi: '588ebdf86amsh6896d4018de52d4p1aa9c8jsn9596c34491d3'\n};\n\n// News API Integration (NewsAPI.org)\nexport const fetchNewsArticles = async (query = 'New York', pageSize = 10) => {\n  try {\n    const response = await fetch(\n      `https://newsapi.org/v2/everything?q=${query}&language=en&pageSize=${pageSize}&sortBy=publishedAt&apiKey=${API_KEYS.news}`\n    );\n    const data = await response.json();\n    \n    if (data.status === 'error') {\n      console.error('News API Error:', data.message);\n      return [];\n    }\n    \n    return data.articles?.map(article => ({\n      id: article.url,\n      title: article.title,\n      summary: article.description || 'No description available',\n      source: article.source.name,\n      mediaUrl: article.urlToImage || 'https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=600',\n      link: article.url,\n      type: 'article',\n      publishedAt: article.publishedAt,\n    })) || [];\n  } catch (error) {\n    console.error('Error fetching news:', error);\n    return [];\n  }\n};\n\n// YouTube API Integration\nexport const fetchYouTubeVideos = async (query = 'New York City', maxResults = 10) => {\n  try {\n    const response = await fetch(\n      `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${query}&type=video&maxResults=${maxResults}&order=date&key=${API_KEYS.youtube}`\n    );\n    const data = await response.json();\n    \n    if (data.error) {\n      console.error('YouTube API Error:', data.error.message);\n      return [];\n    }\n    \n    return data.items?.map(video => ({\n      id: video.id.videoId,\n      title: video.snippet.title,\n      summary: video.snippet.description.substring(0, 150) + '...',\n      source: 'YouTube',\n      mediaUrl: video.snippet.thumbnails.high?.url || video.snippet.thumbnails.medium?.url,\n      link: `https://www.youtube.com/watch?v=${video.id.videoId}`,\n      type: 'video',\n      publishedAt: video.snippet.publishedAt,\n    })) || [];\n  } catch (error) {\n    console.error('Error fetching YouTube videos:', error);\n    return [];\n  }\n};\n\n// TikTok Integration using RapidAPI\nexport const fetchTikTokContent = async (hashtag = 'newyork') => {\n  try {\n    const response = await fetch(\n      `https://tiktok-scraper7.p.rapidapi.com/hashtag/posts?hashtag=${hashtag}&count=10`,\n      {\n        method: 'GET',\n        headers: {\n          'X-RapidAPI-Key': API_KEYS.rapidapi,\n          'X-RapidAPI-Host': 'tiktok-scraper7.p.rapidapi.com'\n        }\n      }\n    );\n    const data = await response.json();\n    \n    if (!data.data?.videos) {\n      console.log('No TikTok videos found');\n      return [];\n    }\n    \n    return data.data.videos.slice(0, 10).map(video => ({\n      id: video.video_id || video.id,\n      title: video.title || video.desc || 'TikTok Video',\n      summary: (video.desc || 'Watch this TikTok video').substring(0, 150),\n      source: 'TikTok',\n      mediaUrl: video.cover || video.origin_cover,\n      link: video.play || `https://www.tiktok.com/@${video.author?.unique_id}/video/${video.video_id}`,\n      type: 'video',\n      publishedAt: video.create_time ? new Date(video.create_time * 1000).toISOString() : new Date().toISOString(),\n    }));\n  } catch (error) {\n    console.error('Error fetching TikTok content:', error);\n    return [];\n  }\n};\n\n// Combined Content Fetch - Mix all sources\nexport const fetchAllContent = async (filters = {}) => {\n  const { query = 'New York', includeVideos = true, includeArticles = true } = filters;\n  \n  const promises = [];\n  \n  if (includeArticles) {\n    promises.push(fetchNewsArticles(query));\n  }\n  \n  if (includeVideos) {\n    promises.push(fetchYouTubeVideos(query));\n    promises.push(fetchTikTokContent(query.toLowerCase().replace(/\\s+/g, '')));\n  }\n  \n  try {\n    const results = await Promise.all(promises);\n    const allContent = results.flat().filter(item => item !== null);\n    \n    // Sort by published date (newest first)\n    return allContent.sort((a, b) => \n      new Date(b.publishedAt) - new Date(a.publishedAt)\n    );\n  } catch (error) {\n    console.error('Error fetching all content:', error);\n    return [];\n  }\n};"],"mappings":"AAAA;;AAEA,MAAMA,QAAQ,GAAG;EACfC,IAAI,EAAE,kCAAkC;EACxCC,OAAO,EAAE,yCAAyC;EAClDC,QAAQ,EAAE;AACZ,CAAC;;AAED;AACA,OAAO,MAAMC,iBAAiB,GAAG,MAAAA,CAAOC,KAAK,GAAG,UAAU,EAAEC,QAAQ,GAAG,EAAE,KAAK;EAC5E,IAAI;IAAA,IAAAC,cAAA;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,uCAAuCJ,KAAK,yBAAyBC,QAAQ,8BAA8BN,QAAQ,CAACC,IAAI,EAC1H,CAAC;IACD,MAAMS,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAElC,IAAID,IAAI,CAACE,MAAM,KAAK,OAAO,EAAE;MAC3BC,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEJ,IAAI,CAACK,OAAO,CAAC;MAC9C,OAAO,EAAE;IACX;IAEA,OAAO,EAAAR,cAAA,GAAAG,IAAI,CAACM,QAAQ,cAAAT,cAAA,uBAAbA,cAAA,CAAeU,GAAG,CAACC,OAAO,KAAK;MACpCC,EAAE,EAAED,OAAO,CAACE,GAAG;MACfC,KAAK,EAAEH,OAAO,CAACG,KAAK;MACpBC,OAAO,EAAEJ,OAAO,CAACK,WAAW,IAAI,0BAA0B;MAC1DC,MAAM,EAAEN,OAAO,CAACM,MAAM,CAACC,IAAI;MAC3BC,QAAQ,EAAER,OAAO,CAACS,UAAU,IAAI,oEAAoE;MACpGC,IAAI,EAAEV,OAAO,CAACE,GAAG;MACjBS,IAAI,EAAE,SAAS;MACfC,WAAW,EAAEZ,OAAO,CAACY;IACvB,CAAC,CAAC,CAAC,KAAI,EAAE;EACX,CAAC,CAAC,OAAOhB,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5C,OAAO,EAAE;EACX;AACF,CAAC;;AAED;AACA,OAAO,MAAMiB,kBAAkB,GAAG,MAAAA,CAAO1B,KAAK,GAAG,eAAe,EAAE2B,UAAU,GAAG,EAAE,KAAK;EACpF,IAAI;IAAA,IAAAC,WAAA;IACF,MAAMzB,QAAQ,GAAG,MAAMC,KAAK,CAC1B,+DAA+DJ,KAAK,0BAA0B2B,UAAU,mBAAmBhC,QAAQ,CAACE,OAAO,EAC7I,CAAC;IACD,MAAMQ,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAElC,IAAID,IAAI,CAACI,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEJ,IAAI,CAACI,KAAK,CAACC,OAAO,CAAC;MACvD,OAAO,EAAE;IACX;IAEA,OAAO,EAAAkB,WAAA,GAAAvB,IAAI,CAACwB,KAAK,cAAAD,WAAA,uBAAVA,WAAA,CAAYhB,GAAG,CAACkB,KAAK;MAAA,IAAAC,qBAAA,EAAAC,sBAAA;MAAA,OAAK;QAC/BlB,EAAE,EAAEgB,KAAK,CAAChB,EAAE,CAACmB,OAAO;QACpBjB,KAAK,EAAEc,KAAK,CAACI,OAAO,CAAClB,KAAK;QAC1BC,OAAO,EAAEa,KAAK,CAACI,OAAO,CAAChB,WAAW,CAACiB,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,KAAK;QAC5DhB,MAAM,EAAE,SAAS;QACjBE,QAAQ,EAAE,EAAAU,qBAAA,GAAAD,KAAK,CAACI,OAAO,CAACE,UAAU,CAACC,IAAI,cAAAN,qBAAA,uBAA7BA,qBAAA,CAA+BhB,GAAG,OAAAiB,sBAAA,GAAIF,KAAK,CAACI,OAAO,CAACE,UAAU,CAACE,MAAM,cAAAN,sBAAA,uBAA/BA,sBAAA,CAAiCjB,GAAG;QACpFQ,IAAI,EAAE,mCAAmCO,KAAK,CAAChB,EAAE,CAACmB,OAAO,EAAE;QAC3DT,IAAI,EAAE,OAAO;QACbC,WAAW,EAAEK,KAAK,CAACI,OAAO,CAACT;MAC7B,CAAC;IAAA,CAAC,CAAC,KAAI,EAAE;EACX,CAAC,CAAC,OAAOhB,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACtD,OAAO,EAAE;EACX;AACF,CAAC;;AAED;AACA,OAAO,MAAM8B,kBAAkB,GAAG,MAAAA,CAAOC,OAAO,GAAG,SAAS,KAAK;EAC/D,IAAI;IAAA,IAAAC,UAAA;IACF,MAAMtC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,gEAAgEoC,OAAO,WAAW,EAClF;MACEE,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,gBAAgB,EAAEhD,QAAQ,CAACG,QAAQ;QACnC,iBAAiB,EAAE;MACrB;IACF,CACF,CAAC;IACD,MAAMO,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAElC,IAAI,GAAAmC,UAAA,GAACpC,IAAI,CAACA,IAAI,cAAAoC,UAAA,eAATA,UAAA,CAAWG,MAAM,GAAE;MACtBpC,OAAO,CAACqC,GAAG,CAAC,wBAAwB,CAAC;MACrC,OAAO,EAAE;IACX;IAEA,OAAOxC,IAAI,CAACA,IAAI,CAACuC,MAAM,CAACE,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAClC,GAAG,CAACkB,KAAK;MAAA,IAAAiB,aAAA;MAAA,OAAK;QACjDjC,EAAE,EAAEgB,KAAK,CAACkB,QAAQ,IAAIlB,KAAK,CAAChB,EAAE;QAC9BE,KAAK,EAAEc,KAAK,CAACd,KAAK,IAAIc,KAAK,CAACmB,IAAI,IAAI,cAAc;QAClDhC,OAAO,EAAE,CAACa,KAAK,CAACmB,IAAI,IAAI,yBAAyB,EAAEd,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC;QACpEhB,MAAM,EAAE,QAAQ;QAChBE,QAAQ,EAAES,KAAK,CAACoB,KAAK,IAAIpB,KAAK,CAACqB,YAAY;QAC3C5B,IAAI,EAAEO,KAAK,CAACsB,IAAI,IAAI,4BAAAL,aAAA,GAA2BjB,KAAK,CAACuB,MAAM,cAAAN,aAAA,uBAAZA,aAAA,CAAcO,SAAS,UAAUxB,KAAK,CAACkB,QAAQ,EAAE;QAChGxB,IAAI,EAAE,OAAO;QACbC,WAAW,EAAEK,KAAK,CAACyB,WAAW,GAAG,IAAIC,IAAI,CAAC1B,KAAK,CAACyB,WAAW,GAAG,IAAI,CAAC,CAACE,WAAW,CAAC,CAAC,GAAG,IAAID,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MAC7G,CAAC;IAAA,CAAC,CAAC;EACL,CAAC,CAAC,OAAOhD,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACtD,OAAO,EAAE;EACX;AACF,CAAC;;AAED;AACA,OAAO,MAAMiD,eAAe,GAAG,MAAAA,CAAOC,OAAO,GAAG,CAAC,CAAC,KAAK;EACrD,MAAM;IAAE3D,KAAK,GAAG,UAAU;IAAE4D,aAAa,GAAG,IAAI;IAAEC,eAAe,GAAG;EAAK,CAAC,GAAGF,OAAO;EAEpF,MAAMG,QAAQ,GAAG,EAAE;EAEnB,IAAID,eAAe,EAAE;IACnBC,QAAQ,CAACC,IAAI,CAAChE,iBAAiB,CAACC,KAAK,CAAC,CAAC;EACzC;EAEA,IAAI4D,aAAa,EAAE;IACjBE,QAAQ,CAACC,IAAI,CAACrC,kBAAkB,CAAC1B,KAAK,CAAC,CAAC;IACxC8D,QAAQ,CAACC,IAAI,CAACxB,kBAAkB,CAACvC,KAAK,CAACgE,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC;EAC5E;EAEA,IAAI;IACF,MAAMC,OAAO,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACN,QAAQ,CAAC;IAC3C,MAAMO,UAAU,GAAGH,OAAO,CAACI,IAAI,CAAC,CAAC,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,KAAK,IAAI,CAAC;;IAE/D;IACA,OAAOH,UAAU,CAACI,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAC1B,IAAInB,IAAI,CAACmB,CAAC,CAAClD,WAAW,CAAC,GAAG,IAAI+B,IAAI,CAACkB,CAAC,CAACjD,WAAW,CAClD,CAAC;EACH,CAAC,CAAC,OAAOhB,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACnD,OAAO,EAAE;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}