{"ast":null,"code":"// src/services/contentService.js\n\n// Base URLs for your backend API\nconst BASE_URL = process.env.REACT_APP_BACKEND_URL || '';\nexport const fetchNewsArticles = async (query = 'New York', pageSize = 10) => {\n  try {\n    var _data$articles;\n    const response = await fetch(`${BASE_URL}/api/news?q=${encodeURIComponent(query)}&pageSize=${pageSize}`);\n    const data = await response.json();\n    return ((_data$articles = data.articles) === null || _data$articles === void 0 ? void 0 : _data$articles.map(article => ({\n      id: article.url,\n      title: article.title,\n      summary: article.description || 'No description available',\n      source: article.source.name,\n      mediaUrl: article.urlToImage || 'https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=600',\n      link: article.url,\n      type: 'article',\n      publishedAt: article.publishedAt\n    }))) || [];\n  } catch (error) {\n    console.error('Error fetching news:', error);\n    return [];\n  }\n};\nexport const fetchYouTubeVideos = async (query = 'New York City', maxResults = 10) => {\n  try {\n    var _data$items;\n    const response = await fetch(`${BASE_URL}/api/youtube?q=${encodeURIComponent(query)}&maxResults=${maxResults}`);\n    const data = await response.json();\n    return ((_data$items = data.items) === null || _data$items === void 0 ? void 0 : _data$items.map(video => {\n      var _video$snippet$thumbn, _video$snippet$thumbn2;\n      return {\n        id: video.id.videoId,\n        title: video.snippet.title,\n        summary: video.snippet.description.substring(0, 150) + '...',\n        source: 'YouTube',\n        mediaUrl: ((_video$snippet$thumbn = video.snippet.thumbnails.high) === null || _video$snippet$thumbn === void 0 ? void 0 : _video$snippet$thumbn.url) || ((_video$snippet$thumbn2 = video.snippet.thumbnails.medium) === null || _video$snippet$thumbn2 === void 0 ? void 0 : _video$snippet$thumbn2.url),\n        link: `https://www.youtube.com/watch?v=${video.id.videoId}`,\n        type: 'video',\n        publishedAt: video.snippet.publishedAt\n      };\n    })) || [];\n  } catch (error) {\n    console.error('Error fetching YouTube videos:', error);\n    return [];\n  }\n};\nexport const fetchTikTokContent = async (hashtag = 'newyork') => {\n  try {\n    var _data$data;\n    const response = await fetch(`${BASE_URL}/api/tiktok?hashtag=${encodeURIComponent(hashtag)}`);\n    const data = await response.json();\n    if (!((_data$data = data.data) !== null && _data$data !== void 0 && _data$data.videos)) return [];\n    return data.data.videos.slice(0, 10).map(video => {\n      var _video$author;\n      return {\n        id: video.video_id || video.id,\n        title: video.title || video.desc || 'TikTok Video',\n        summary: (video.desc || 'Watch this TikTok video').substring(0, 150),\n        source: 'TikTok',\n        mediaUrl: video.cover || video.origin_cover,\n        link: video.play || `https://www.tiktok.com/@${(_video$author = video.author) === null || _video$author === void 0 ? void 0 : _video$author.unique_id}/video/${video.video_id}`,\n        type: 'video',\n        publishedAt: video.create_time ? new Date(video.create_time * 1000).toISOString() : new Date().toISOString()\n      };\n    });\n  } catch (error) {\n    console.error('Error fetching TikTok content:', error);\n    return [];\n  }\n};\nexport const fetchAllContent = async (filters = {}) => {\n  const {\n    query = 'New York',\n    includeVideos = true,\n    includeArticles = true\n  } = filters;\n  const promises = [];\n  if (includeArticles) promises.push(fetchNewsArticles(query));\n  if (includeVideos) {\n    promises.push(fetchYouTubeVideos(query));\n    promises.push(fetchTikTokContent(query.toLowerCase().replace(/\\s+/g, '')));\n  }\n  try {\n    const results = await Promise.all(promises);\n    return results.flat().filter(item => item !== null).sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt));\n  } catch (error) {\n    console.error('Error fetching all content:', error);\n    return [];\n  }\n};","map":{"version":3,"names":["BASE_URL","process","env","REACT_APP_BACKEND_URL","fetchNewsArticles","query","pageSize","_data$articles","response","fetch","encodeURIComponent","data","json","articles","map","article","id","url","title","summary","description","source","name","mediaUrl","urlToImage","link","type","publishedAt","error","console","fetchYouTubeVideos","maxResults","_data$items","items","video","_video$snippet$thumbn","_video$snippet$thumbn2","videoId","snippet","substring","thumbnails","high","medium","fetchTikTokContent","hashtag","_data$data","videos","slice","_video$author","video_id","desc","cover","origin_cover","play","author","unique_id","create_time","Date","toISOString","fetchAllContent","filters","includeVideos","includeArticles","promises","push","toLowerCase","replace","results","Promise","all","flat","filter","item","sort","a","b"],"sources":["/Users/tbready/nyc-insight-project/src/services/contentService.js"],"sourcesContent":["// src/services/contentService.js\n\n// Base URLs for your backend API\nconst BASE_URL = process.env.REACT_APP_BACKEND_URL || '';\n\nexport const fetchNewsArticles = async (query = 'New York', pageSize = 10) => {\n  try {\n    const response = await fetch(`${BASE_URL}/api/news?q=${encodeURIComponent(query)}&pageSize=${pageSize}`);\n    const data = await response.json();\n\n    return data.articles?.map(article => ({\n      id: article.url,\n      title: article.title,\n      summary: article.description || 'No description available',\n      source: article.source.name,\n      mediaUrl: article.urlToImage || 'https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=600',\n      link: article.url,\n      type: 'article',\n      publishedAt: article.publishedAt,\n    })) || [];\n  } catch (error) {\n    console.error('Error fetching news:', error);\n    return [];\n  }\n};\n\nexport const fetchYouTubeVideos = async (query = 'New York City', maxResults = 10) => {\n  try {\n    const response = await fetch(`${BASE_URL}/api/youtube?q=${encodeURIComponent(query)}&maxResults=${maxResults}`);\n    const data = await response.json();\n\n    return data.items?.map(video => ({\n      id: video.id.videoId,\n      title: video.snippet.title,\n      summary: video.snippet.description.substring(0, 150) + '...',\n      source: 'YouTube',\n      mediaUrl: video.snippet.thumbnails.high?.url || video.snippet.thumbnails.medium?.url,\n      link: `https://www.youtube.com/watch?v=${video.id.videoId}`,\n      type: 'video',\n      publishedAt: video.snippet.publishedAt,\n    })) || [];\n  } catch (error) {\n    console.error('Error fetching YouTube videos:', error);\n    return [];\n  }\n};\n\nexport const fetchTikTokContent = async (hashtag = 'newyork') => {\n  try {\n    const response = await fetch(`${BASE_URL}/api/tiktok?hashtag=${encodeURIComponent(hashtag)}`);\n    const data = await response.json();\n\n    if (!data.data?.videos) return [];\n\n    return data.data.videos.slice(0, 10).map(video => ({\n      id: video.video_id || video.id,\n      title: video.title || video.desc || 'TikTok Video',\n      summary: (video.desc || 'Watch this TikTok video').substring(0, 150),\n      source: 'TikTok',\n      mediaUrl: video.cover || video.origin_cover,\n      link: video.play || `https://www.tiktok.com/@${video.author?.unique_id}/video/${video.video_id}`,\n      type: 'video',\n      publishedAt: video.create_time ? new Date(video.create_time * 1000).toISOString() : new Date().toISOString(),\n    }));\n  } catch (error) {\n    console.error('Error fetching TikTok content:', error);\n    return [];\n  }\n};\n\nexport const fetchAllContent = async (filters = {}) => {\n  const { query = 'New York', includeVideos = true, includeArticles = true } = filters;\n  const promises = [];\n\n  if (includeArticles) promises.push(fetchNewsArticles(query));\n  if (includeVideos) {\n    promises.push(fetchYouTubeVideos(query));\n    promises.push(fetchTikTokContent(query.toLowerCase().replace(/\\s+/g, '')));\n  }\n\n  try {\n    const results = await Promise.all(promises);\n    return results.flat().filter(item => item !== null)\n      .sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt));\n  } catch (error) {\n    console.error('Error fetching all content:', error);\n    return [];\n  }\n};\n"],"mappings":"AAAA;;AAEA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,IAAI,EAAE;AAExD,OAAO,MAAMC,iBAAiB,GAAG,MAAAA,CAAOC,KAAK,GAAG,UAAU,EAAEC,QAAQ,GAAG,EAAE,KAAK;EAC5E,IAAI;IAAA,IAAAC,cAAA;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGT,QAAQ,eAAeU,kBAAkB,CAACL,KAAK,CAAC,aAAaC,QAAQ,EAAE,CAAC;IACxG,MAAMK,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;IAElC,OAAO,EAAAL,cAAA,GAAAI,IAAI,CAACE,QAAQ,cAAAN,cAAA,uBAAbA,cAAA,CAAeO,GAAG,CAACC,OAAO,KAAK;MACpCC,EAAE,EAAED,OAAO,CAACE,GAAG;MACfC,KAAK,EAAEH,OAAO,CAACG,KAAK;MACpBC,OAAO,EAAEJ,OAAO,CAACK,WAAW,IAAI,0BAA0B;MAC1DC,MAAM,EAAEN,OAAO,CAACM,MAAM,CAACC,IAAI;MAC3BC,QAAQ,EAAER,OAAO,CAACS,UAAU,IAAI,oEAAoE;MACpGC,IAAI,EAAEV,OAAO,CAACE,GAAG;MACjBS,IAAI,EAAE,SAAS;MACfC,WAAW,EAAEZ,OAAO,CAACY;IACvB,CAAC,CAAC,CAAC,KAAI,EAAE;EACX,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5C,OAAO,EAAE;EACX;AACF,CAAC;AAED,OAAO,MAAME,kBAAkB,GAAG,MAAAA,CAAOzB,KAAK,GAAG,eAAe,EAAE0B,UAAU,GAAG,EAAE,KAAK;EACpF,IAAI;IAAA,IAAAC,WAAA;IACF,MAAMxB,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGT,QAAQ,kBAAkBU,kBAAkB,CAACL,KAAK,CAAC,eAAe0B,UAAU,EAAE,CAAC;IAC/G,MAAMpB,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;IAElC,OAAO,EAAAoB,WAAA,GAAArB,IAAI,CAACsB,KAAK,cAAAD,WAAA,uBAAVA,WAAA,CAAYlB,GAAG,CAACoB,KAAK;MAAA,IAAAC,qBAAA,EAAAC,sBAAA;MAAA,OAAK;QAC/BpB,EAAE,EAAEkB,KAAK,CAAClB,EAAE,CAACqB,OAAO;QACpBnB,KAAK,EAAEgB,KAAK,CAACI,OAAO,CAACpB,KAAK;QAC1BC,OAAO,EAAEe,KAAK,CAACI,OAAO,CAAClB,WAAW,CAACmB,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,KAAK;QAC5DlB,MAAM,EAAE,SAAS;QACjBE,QAAQ,EAAE,EAAAY,qBAAA,GAAAD,KAAK,CAACI,OAAO,CAACE,UAAU,CAACC,IAAI,cAAAN,qBAAA,uBAA7BA,qBAAA,CAA+BlB,GAAG,OAAAmB,sBAAA,GAAIF,KAAK,CAACI,OAAO,CAACE,UAAU,CAACE,MAAM,cAAAN,sBAAA,uBAA/BA,sBAAA,CAAiCnB,GAAG;QACpFQ,IAAI,EAAE,mCAAmCS,KAAK,CAAClB,EAAE,CAACqB,OAAO,EAAE;QAC3DX,IAAI,EAAE,OAAO;QACbC,WAAW,EAAEO,KAAK,CAACI,OAAO,CAACX;MAC7B,CAAC;IAAA,CAAC,CAAC,KAAI,EAAE;EACX,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACtD,OAAO,EAAE;EACX;AACF,CAAC;AAED,OAAO,MAAMe,kBAAkB,GAAG,MAAAA,CAAOC,OAAO,GAAG,SAAS,KAAK;EAC/D,IAAI;IAAA,IAAAC,UAAA;IACF,MAAMrC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGT,QAAQ,uBAAuBU,kBAAkB,CAACkC,OAAO,CAAC,EAAE,CAAC;IAC7F,MAAMjC,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;IAElC,IAAI,GAAAiC,UAAA,GAAClC,IAAI,CAACA,IAAI,cAAAkC,UAAA,eAATA,UAAA,CAAWC,MAAM,GAAE,OAAO,EAAE;IAEjC,OAAOnC,IAAI,CAACA,IAAI,CAACmC,MAAM,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAACjC,GAAG,CAACoB,KAAK;MAAA,IAAAc,aAAA;MAAA,OAAK;QACjDhC,EAAE,EAAEkB,KAAK,CAACe,QAAQ,IAAIf,KAAK,CAAClB,EAAE;QAC9BE,KAAK,EAAEgB,KAAK,CAAChB,KAAK,IAAIgB,KAAK,CAACgB,IAAI,IAAI,cAAc;QAClD/B,OAAO,EAAE,CAACe,KAAK,CAACgB,IAAI,IAAI,yBAAyB,EAAEX,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC;QACpElB,MAAM,EAAE,QAAQ;QAChBE,QAAQ,EAAEW,KAAK,CAACiB,KAAK,IAAIjB,KAAK,CAACkB,YAAY;QAC3C3B,IAAI,EAAES,KAAK,CAACmB,IAAI,IAAI,4BAAAL,aAAA,GAA2Bd,KAAK,CAACoB,MAAM,cAAAN,aAAA,uBAAZA,aAAA,CAAcO,SAAS,UAAUrB,KAAK,CAACe,QAAQ,EAAE;QAChGvB,IAAI,EAAE,OAAO;QACbC,WAAW,EAAEO,KAAK,CAACsB,WAAW,GAAG,IAAIC,IAAI,CAACvB,KAAK,CAACsB,WAAW,GAAG,IAAI,CAAC,CAACE,WAAW,CAAC,CAAC,GAAG,IAAID,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MAC7G,CAAC;IAAA,CAAC,CAAC;EACL,CAAC,CAAC,OAAO9B,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACtD,OAAO,EAAE;EACX;AACF,CAAC;AAED,OAAO,MAAM+B,eAAe,GAAG,MAAAA,CAAOC,OAAO,GAAG,CAAC,CAAC,KAAK;EACrD,MAAM;IAAEvD,KAAK,GAAG,UAAU;IAAEwD,aAAa,GAAG,IAAI;IAAEC,eAAe,GAAG;EAAK,CAAC,GAAGF,OAAO;EACpF,MAAMG,QAAQ,GAAG,EAAE;EAEnB,IAAID,eAAe,EAAEC,QAAQ,CAACC,IAAI,CAAC5D,iBAAiB,CAACC,KAAK,CAAC,CAAC;EAC5D,IAAIwD,aAAa,EAAE;IACjBE,QAAQ,CAACC,IAAI,CAAClC,kBAAkB,CAACzB,KAAK,CAAC,CAAC;IACxC0D,QAAQ,CAACC,IAAI,CAACrB,kBAAkB,CAACtC,KAAK,CAAC4D,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC;EAC5E;EAEA,IAAI;IACF,MAAMC,OAAO,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACN,QAAQ,CAAC;IAC3C,OAAOI,OAAO,CAACG,IAAI,CAAC,CAAC,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,KAAK,IAAI,CAAC,CAChDC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIlB,IAAI,CAACkB,CAAC,CAAChD,WAAW,CAAC,GAAG,IAAI8B,IAAI,CAACiB,CAAC,CAAC/C,WAAW,CAAC,CAAC;EACtE,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACnD,OAAO,EAAE;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}